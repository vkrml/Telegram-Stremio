{% extends "base.html" %}

{% block content %}
<div class="w-full max-w-[1920px] mx-auto px-4 md:px-8 py-8 md:py-12">
    
    <div class="flex flex-col md:flex-row gap-4 justify-between items-end mb-8 md:mb-12 border-b-2 border-black pb-6">
        <div>
            <h1 class="font-serif text-3xl md:text-4xl font-black mb-1">Results</h1>
            {% if query %}
            <p class="font-bold text-sm text-gray-500">For: "<span class="text-black underline">{{ query }}</span>"</p>
            {% endif %}
        </div>
        
        <form action="/search" method="get" class="w-full md:w-auto min-w-[300px]">
            <div class="relative">
                <input type="text" name="q" value="{{ query }}" 
                       class="w-full bg-white border-2 border-black px-4 py-2 font-bold focus:outline-none shadow-brutal-sm transition-all text-sm rounded-none"
                       placeholder="Refine search...">
                <button type="submit" class="absolute right-0 top-0 bottom-0 px-3 text-gray-400 hover:text-black">
                    <i class="fa-solid fa-arrow-right"></i>
                </button>
            </div>
        </form>
    </div>

    {% if query %}
        {% if results %}
        <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 2xl:grid-cols-6 gap-4 md:gap-6">
            {% for media in results %}
            <a href="/view/{{ media.media_type }}/{{ media.tmdb_id }}?db_index={{ media.db_index }}" 
               class="group block relative bg-white border-2 border-black p-2 shadow-brutal hover:shadow-brutal-lg hover:-translate-y-1 transition-all duration-200">
                
                <div class="aspect-[2/3] w-full relative overflow-hidden bg-gray-100 border border-black/10">
                    <img src="{{ media.poster }}" alt="{{ media.title }}" class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105" loading="lazy">
                </div>

                <div class="pt-3 pb-1 px-1">
                    <h3 class="font-bold text-sm leading-tight mb-2 line-clamp-1 group-hover:underline decoration-2">{{ media.title }}</h3>
                    <div class="flex justify-between items-center text-[10px] font-black uppercase tracking-wider text-gray-500">
                        <span>{{ media.release_year }}</span>
                        <span class="bg-gray-100 border border-black px-1 text-black">{{ media.media_type }}</span>
                    </div>
                </div>
            </a>
            {% endfor %}
        </div>
        {% else %}
        <div class="flex flex-col items-center justify-center py-20 bg-white border-2 border-black shadow-brutal mx-auto max-w-lg text-center px-4">
            <i class="fa-solid fa-ghost text-4xl mb-4 text-gray-300"></i>
            <h3 class="font-serif text-2xl font-bold mb-2">No matches</h3>
            <p class="text-sm text-gray-500 mb-6">We couldn't find anything matching "{ { query } }" in the index.</p>
            <a href="/" class="px-6 py-2 bg-black text-white font-bold uppercase text-xs tracking-widest hover:bg-accent hover:text-black border-2 border-transparent hover:border-black transition-all">
                Try Again
            </a>
        </div>
        {% endif %}
    {% endif %}
</div>
{% endblock %}
